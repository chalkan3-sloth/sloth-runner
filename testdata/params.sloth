-- testdata/params.lua
-- Tests parameter substitution from a values file

workflow({
    name = "test_params",
    description = "Tests parameter substitution from a values file",
    tasks = {
        {
            name = "task_with_params",
            run = function(params, inputs)
                if params.message == "Hello from values!" and params.nested.key == "value" then
                    return {changed = false, message = "Params correctly substituted"}
                else
                    return {failed = true, message = "Param substitution failed. Got: " .. data.to_json(params)}
                end
            end
        }
    }
})