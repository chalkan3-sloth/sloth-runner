-- testdata/dependencies.lua
-- Tests task dependencies execution order

-- Used to track execution order.
EXECUTION_ORDER = {}

workflow({
    name = "test_dependencies",
    description = "Tests task dependencies execution order",
    tasks = {
        {
            name = "task_C",
            depends_on = {"task_B"},
            run = function()
                table.insert(EXECUTION_ORDER, "C")
                return {changed = false, message = "Task C done"}
            end
        },
        {
            name = "task_A",
            run = function()
                table.insert(EXECUTION_ORDER, "A")
                return {changed = false, message = "Task A done"}
            end
        },
        {
            name = "task_B",
            depends_on = {"task_A"},
            run = function()
                table.insert(EXECUTION_ORDER, "B")
                return {changed = false, message = "Task B done"}
            end
        }
    }
})