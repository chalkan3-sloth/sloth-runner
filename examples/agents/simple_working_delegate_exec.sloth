-- EXEMPLO SIMPLES: Execu√ß√£o remota usando exec.run nativo
-- Este formato funciona bem para execu√ß√£o remota
-- Usa os m√≥dulos nativos do sistema

TaskDefinitions = {
    execucao_remota_simples = {
        description = "Teste simples de execu√ß√£o remota com exec.run",
        tasks = {
            {
                name = "teste_hostname_ladyguica",
                description = "Executa hostname no agente ladyguica usando exec.run",
                command = function()
                    log.info("üöÄ Executando comando remoto no ladyguica usando exec.run...")
                    
                    -- Usa exec.run do sistema nativo
                    local output, error, failed = exec.run("hostname && echo 'Data:' && date")
                    
                    if not failed then
                        log.info("‚úÖ Sucesso! Sa√≠da: " .. output)
                        return true, "Comando executado com sucesso no agente"
                    else
                        log.error("‚ùå Falha: " .. (error or "erro desconhecido"))
                        return false, "Comando falhou no agente"
                    end
                end,
                delegate_to = "ladyguica",
                timeout = "30s"
            },
            {
                name = "teste_ls_keiteguica",
                description = "Lista arquivos no agente keiteguica usando exec.run",
                command = function()
                    log.info("üîç Listando arquivos no keiteguica usando exec.run...")
                    
                    -- Usa exec.run do sistema nativo
                    local output, error, failed = exec.run("ls -la $HOME | head -10")
                    
                    if not failed then
                        log.info("‚úÖ Listagem realizada com sucesso!")
                        log.info("üìÇ Arquivos:\n" .. output)
                        return true, "Listagem conclu√≠da no agente"
                    else
                        log.error("‚ùå Falha na listagem: " .. (error or "erro desconhecido"))
                        return false, "Listagem falhou no agente"
                    end
                end,
                delegate_to = "keiteguica",
                timeout = "30s"
            }
        }
    }
}