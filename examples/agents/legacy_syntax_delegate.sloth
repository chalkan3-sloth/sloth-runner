-- Simple working example using legacy syntax
-- This should work with remote delegation

workflow({
    name = "simple_remote_test",
    description = "Simple remote test using legacy syntax",
    tasks = {
        {
            name = "test_remote",
            description = "Execute simple command on remote agent",
            run = function()
                log.info("üöÄ Executing on remote agent...")

                -- Simple command execution
                local output, error, failed = exec.run("echo 'Hello from remote agent' && hostname")

                if not failed then
                    log.info("‚úÖ Success!")
                    log.info("üìù Output: " .. output)
                    return {changed = true, message = "Command executed successfully"}
                else
                    log.error("‚ùå Failed: " .. (error or "unknown error"))
                    return {failed = true, message = "Command failed"}
                end
            end,
            delegate_to = "ladyguica",
            timeout = "30s"
        }
    }
})
