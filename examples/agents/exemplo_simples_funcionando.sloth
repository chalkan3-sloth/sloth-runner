-- EXEMPLO SIMPLES: Execu√ß√£o remota usando TaskDefinitions
-- Este formato funciona bem para execu√ß√£o remota

workflow({
    name = "execucao_remota_simples",
    description = "Teste simples de execu√ß√£o remota",
    tasks = {
        {
            name = "teste_ladyguica",
            description = "Executa hostname no agente ladyguica",
            run = function()
                log.info("üöÄ Executando comando remoto no ladyguica...")

                -- Executa comando simples
                local output, error, failed = exec.run("hostname")

                if not failed then
                    log.info("‚úÖ Sucesso! Hostname: " .. output)
                    return {changed = true, message = "Comando executado com sucesso"}
                else
                    log.error("‚ùå Falha: " .. (error or "erro desconhecido"))
                    return {failed = true, message = "Comando falhou"}
                end
            end,
            delegate_to = "ladyguica",
            timeout = "30s"
        }
    }
})
